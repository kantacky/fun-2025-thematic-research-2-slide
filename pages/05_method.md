---
layout: content
transition: none
title: 提案手法
subtitle: Gemini API の構造化出力機能を用いたフォトウォークデータ生成
---

# Google Gemini API の構造化出力機能を使用

- コンテキスト容量
- 構造化出力の安定性
- スループット

<!--
データ生成には、Google Gemini API の構造化出力機能を使用しました。
採用の理由は主に3点です。

1点目はコンテキスト容量です。Gemini は非常に長いコンテキストを扱えるため、地図情報や詳細なプロンプトを入力として与えることができます。
2点目は構造化出力の安定性です。JSONなどの形式で厳密に出力させることができるため、後処理が容易になります。
3点目はスループットです。大量のデータを生成する必要があるため、高速に処理できることが重要でした。
-->

---
layout: content
transition: none
title: 提案手法
subtitle: フォトウォークデータに求める要件（スキーマ設計）
---

# Session（1回のフォトウォーク）とRecord（各撮影地点）から構成
- Session: ユーザID, Recordリスト
- Record: 時刻, 緯度・経度, 被写体カテゴリ（landscape, building, vehicle, person, ...）
- それぞれのフィールドの説明を記述

<!--
生成するフォトウォークデータのスキーマ設計についてです。
データは、1回のフォトウォークを表す「Session」と、各撮影地点を表す「Record」の2階層で構成しました。

SessionにはユーザIDと、Recordのリストが含まれます。
Recordには、撮影時刻、緯度・経度、そして被写体のカテゴリ（風景、建物、乗り物など）を含めました。
これらのフィールドに対して詳細な説明を記述し、LLMが適切に値を生成できるようにしました。
-->

---
layout: content
transition: none
title: 提案手法
subtitle: フォトウォークデータに求める要件（プロンプト設計）
---

<div class="split">
<div>

# プロンプトに含める条件

- エージェントの役割を明確化
- 周回性
- 地理的整合性
- 生成条件（エリア名，データ規模）

</div>
<div>

# プロンプトの例

```text
あなたは<エリア名>エリアをフォトウォークするエージェントである．
以下の条件に従って，フォトウォークを行いなさい．
- <画像の枚数>枚程度の画像を撮影すること．
- 徒歩<1セッションの時間>分程度の距離を歩くこと．
- 出発地点と到着地点が同一であること．
- 撮影する場所が地図の道路上であること．
```

</div>
</div>

<!--
プロンプトの設計についてです。
LLMに対して、特定の役割と制約条件を与えました。

「あなたは〇〇エリアをフォトウォークするエージェントである」という役割を明確化した上で、以下の条件を課しました。
まず「周回性」です。出発地点と到着地点が同一であることを求めました。
次に「地理的整合性」です。撮影場所が地図上の道路上にあることを求めました。
そして、具体的な生成条件として、対象エリア名、撮影枚数、所要時間などを指示しました。

右側のコードブロックは、実際に使用したプロンプトの抜粋です。
-->
